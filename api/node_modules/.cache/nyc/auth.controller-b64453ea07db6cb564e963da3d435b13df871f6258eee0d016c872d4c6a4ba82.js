function cov_2cautwdutz(){var path="C:\\Users\\Eric\\webAppClone\\4353Project\\api\\controllers\\auth.controller.js";var hash="4159e727176da5e14a8503a05d8f52856c43d146";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Eric\\webAppClone\\4353Project\\api\\controllers\\auth.controller.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:45}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:4,column:10},end:{line:4,column:33}},"3":{start:{line:5,column:13},end:{line:5,column:32}},"4":{start:{line:7,column:11},end:{line:13,column:2}},"5":{start:{line:16,column:0},end:{line:59,column:1}},"6":{start:{line:17,column:16},end:{line:17,column:20}},"7":{start:{line:18,column:24},end:{line:18,column:60}},"8":{start:{line:19,column:16},end:{line:19,column:91}},"9":{start:{line:20,column:17},end:{line:20,column:133}},"10":{start:{line:23,column:4},end:{line:58,column:6}},"11":{start:{line:24,column:8},end:{line:26,column:9}},"12":{start:{line:25,column:12},end:{line:25,column:56}},"13":{start:{line:27,column:8},end:{line:27,column:45}},"14":{start:{line:30,column:8},end:{line:46,column:10}},"15":{start:{line:31,column:12},end:{line:45,column:25}},"16":{start:{line:32,column:16},end:{line:44,column:18}},"17":{start:{line:33,column:20},end:{line:33,column:39}},"18":{start:{line:33,column:29},end:{line:33,column:39}},"19":{start:{line:34,column:20},end:{line:43,column:21}},"20":{start:{line:35,column:24},end:{line:35,column:73}},"21":{start:{line:36,column:24},end:{line:38,column:26}},"22":{start:{line:39,column:24},end:{line:39,column:38}},"23":{start:{line:42,column:24},end:{line:42,column:37}},"24":{start:{line:48,column:8},end:{line:56,column:9}},"25":{start:{line:49,column:12},end:{line:55,column:14}},"26":{start:{line:50,column:16},end:{line:50,column:35}},"27":{start:{line:50,column:25},end:{line:50,column:35}},"28":{start:{line:51,column:16},end:{line:51,column:68}},"29":{start:{line:52,column:16},end:{line:54,column:18}},"30":{start:{line:57,column:8},end:{line:57,column:29}},"31":{start:{line:62,column:0},end:{line:122,column:1}},"32":{start:{line:63,column:16},end:{line:63,column:20}},"33":{start:{line:64,column:16},end:{line:64,column:110}},"34":{start:{line:66,column:4},end:{line:66,column:40}},"35":{start:{line:68,column:4},end:{line:121,column:6}},"36":{start:{line:69,column:8},end:{line:74,column:9}},"37":{start:{line:70,column:12},end:{line:72,column:14}},"38":{start:{line:73,column:12},end:{line:73,column:56}},"39":{start:{line:77,column:8},end:{line:114,column:10}},"40":{start:{line:78,column:12},end:{line:113,column:25}},"41":{start:{line:79,column:16},end:{line:112,column:18}},"42":{start:{line:80,column:20},end:{line:80,column:39}},"43":{start:{line:80,column:29},end:{line:80,column:39}},"44":{start:{line:82,column:20},end:{line:111,column:21}},"45":{start:{line:83,column:46},end:{line:86,column:25}},"46":{start:{line:88,column:24},end:{line:106,column:25}},"47":{start:{line:89,column:28},end:{line:89,column:60}},"48":{start:{line:90,column:28},end:{line:93,column:30}},"49":{start:{line:96,column:28},end:{line:96,column:76}},"50":{start:{line:97,column:40},end:{line:99,column:30}},"51":{start:{line:100,column:28},end:{line:104,column:30}},"52":{start:{line:107,column:24},end:{line:107,column:37}},"53":{start:{line:110,column:24},end:{line:110,column:38}},"54":{start:{line:116,column:8},end:{line:119,column:9}},"55":{start:{line:117,column:12},end:{line:117,column:61}},"56":{start:{line:118,column:12},end:{line:118,column:61}},"57":{start:{line:120,column:8},end:{line:120,column:29}},"58":{start:{line:123,column:0},end:{line:148,column:1}},"59":{start:{line:124,column:16},end:{line:124,column:20}},"60":{start:{line:125,column:16},end:{line:125,column:84}},"61":{start:{line:127,column:4},end:{line:147,column:6}},"62":{start:{line:128,column:8},end:{line:133,column:9}},"63":{start:{line:129,column:12},end:{line:131,column:14}},"64":{start:{line:132,column:12},end:{line:132,column:56}},"65":{start:{line:136,column:8},end:{line:145,column:10}},"66":{start:{line:137,column:12},end:{line:144,column:21}},"67":{start:{line:138,column:16},end:{line:143,column:18}},"68":{start:{line:139,column:20},end:{line:139,column:39}},"69":{start:{line:139,column:29},end:{line:139,column:39}},"70":{start:{line:140,column:20},end:{line:142,column:22}},"71":{start:{line:146,column:8},end:{line:146,column:29}},"72":{start:{line:149,column:0},end:{line:159,column:1}},"73":{start:{line:150,column:17},end:{line:150,column:239}},"74":{start:{line:151,column:4},end:{line:157,column:7}},"75":{start:{line:152,column:8},end:{line:152,column:27}},"76":{start:{line:152,column:17},end:{line:152,column:27}},"77":{start:{line:153,column:8},end:{line:156,column:11}},"78":{start:{line:154,column:12},end:{line:154,column:31}},"79":{start:{line:154,column:21},end:{line:154,column:31}},"80":{start:{line:155,column:12},end:{line:155,column:41}},"81":{start:{line:158,column:4},end:{line:158,column:25}},"82":{start:{line:162,column:0},end:{line:173,column:1}},"83":{start:{line:164,column:4},end:{line:172,column:6}},"84":{start:{line:165,column:8},end:{line:167,column:9}},"85":{start:{line:166,column:12},end:{line:166,column:56}},"86":{start:{line:168,column:8},end:{line:168,column:51}},"87":{start:{line:169,column:21},end:{line:169,column:322}},"88":{start:{line:170,column:8},end:{line:170,column:33}},"89":{start:{line:171,column:8},end:{line:171,column:29}},"90":{start:{line:175,column:0},end:{line:208,column:1}},"91":{start:{line:176,column:4},end:{line:176,column:50}},"92":{start:{line:178,column:16},end:{line:178,column:81}},"93":{start:{line:180,column:4},end:{line:207,column:6}},"94":{start:{line:181,column:8},end:{line:186,column:9}},"95":{start:{line:182,column:12},end:{line:184,column:14}},"96":{start:{line:185,column:12},end:{line:185,column:56}},"97":{start:{line:189,column:8},end:{line:205,column:10}},"98":{start:{line:190,column:12},end:{line:204,column:25}},"99":{start:{line:191,column:16},end:{line:203,column:18}},"100":{start:{line:192,column:20},end:{line:192,column:39}},"101":{start:{line:192,column:29},end:{line:192,column:39}},"102":{start:{line:193,column:20},end:{line:195,column:22}},"103":{start:{line:196,column:20},end:{line:196,column:51}},"104":{start:{line:197,column:20},end:{line:202,column:21}},"105":{start:{line:198,column:24},end:{line:198,column:37}},"106":{start:{line:201,column:24},end:{line:201,column:38}},"107":{start:{line:206,column:8},end:{line:206,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:17},end:{line:16,column:18}},loc:{start:{line:16,column:31},end:{line:59,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:24},end:{line:23,column:25}},loc:{start:{line:23,column:56},end:{line:58,column:5}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:30,column:34},end:{line:30,column:35}},loc:{start:{line:30,column:60},end:{line:46,column:9}},line:30},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:23},end:{line:31,column:24}},loc:{start:{line:31,column:34},end:{line:45,column:17}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:32,column:40},end:{line:32,column:41}},loc:{start:{line:32,column:69},end:{line:44,column:17}},line:32},"5":{name:"(anonymous_5)",decl:{start:{line:49,column:37},end:{line:49,column:38}},loc:{start:{line:49,column:66},end:{line:55,column:13}},line:49},"6":{name:"(anonymous_6)",decl:{start:{line:62,column:17},end:{line:62,column:18}},loc:{start:{line:62,column:31},end:{line:122,column:1}},line:62},"7":{name:"(anonymous_7)",decl:{start:{line:68,column:24},end:{line:68,column:25}},loc:{start:{line:68,column:56},end:{line:121,column:5}},line:68},"8":{name:"(anonymous_8)",decl:{start:{line:77,column:34},end:{line:77,column:35}},loc:{start:{line:77,column:60},end:{line:114,column:9}},line:77},"9":{name:"(anonymous_9)",decl:{start:{line:78,column:23},end:{line:78,column:24}},loc:{start:{line:78,column:34},end:{line:113,column:17}},line:78},"10":{name:"(anonymous_10)",decl:{start:{line:79,column:40},end:{line:79,column:41}},loc:{start:{line:79,column:69},end:{line:112,column:17}},line:79},"11":{name:"(anonymous_11)",decl:{start:{line:123,column:19},end:{line:123,column:20}},loc:{start:{line:123,column:33},end:{line:148,column:1}},line:123},"12":{name:"(anonymous_12)",decl:{start:{line:127,column:23},end:{line:127,column:24}},loc:{start:{line:127,column:56},end:{line:147,column:5}},line:127},"13":{name:"(anonymous_13)",decl:{start:{line:136,column:34},end:{line:136,column:35}},loc:{start:{line:136,column:61},end:{line:145,column:9}},line:136},"14":{name:"(anonymous_14)",decl:{start:{line:137,column:23},end:{line:137,column:24}},loc:{start:{line:137,column:35},end:{line:144,column:13}},line:137},"15":{name:"(anonymous_15)",decl:{start:{line:138,column:40},end:{line:138,column:41}},loc:{start:{line:138,column:71},end:{line:143,column:17}},line:138},"16":{name:"(anonymous_16)",decl:{start:{line:149,column:20},end:{line:149,column:21}},loc:{start:{line:149,column:34},end:{line:159,column:1}},line:149},"17":{name:"(anonymous_17)",decl:{start:{line:151,column:23},end:{line:151,column:24}},loc:{start:{line:151,column:50},end:{line:157,column:5}},line:151},"18":{name:"(anonymous_18)",decl:{start:{line:153,column:33},end:{line:153,column:34}},loc:{start:{line:153,column:64},end:{line:156,column:9}},line:153},"19":{name:"(anonymous_19)",decl:{start:{line:162,column:22},end:{line:162,column:23}},loc:{start:{line:162,column:36},end:{line:173,column:1}},line:162},"20":{name:"(anonymous_20)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:56},end:{line:172,column:5}},line:164},"21":{name:"(anonymous_21)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:34},end:{line:208,column:1}},line:175},"22":{name:"(anonymous_22)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:56},end:{line:207,column:5}},line:180},"23":{name:"(anonymous_23)",decl:{start:{line:189,column:34},end:{line:189,column:35}},loc:{start:{line:189,column:60},end:{line:205,column:9}},line:189},"24":{name:"(anonymous_24)",decl:{start:{line:190,column:23},end:{line:190,column:24}},loc:{start:{line:190,column:34},end:{line:204,column:17}},line:190},"25":{name:"(anonymous_25)",decl:{start:{line:191,column:40},end:{line:191,column:41}},loc:{start:{line:191,column:69},end:{line:203,column:17}},line:191}},branchMap:{"0":{loc:{start:{line:24,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:26,column:9}},{start:{line:24,column:8},end:{line:26,column:9}}],line:24},"1":{loc:{start:{line:33,column:20},end:{line:33,column:39}},type:"if",locations:[{start:{line:33,column:20},end:{line:33,column:39}},{start:{line:33,column:20},end:{line:33,column:39}}],line:33},"2":{loc:{start:{line:34,column:20},end:{line:43,column:21}},type:"if",locations:[{start:{line:34,column:20},end:{line:43,column:21}},{start:{line:34,column:20},end:{line:43,column:21}}],line:34},"3":{loc:{start:{line:48,column:8},end:{line:56,column:9}},type:"if",locations:[{start:{line:48,column:8},end:{line:56,column:9}},{start:{line:48,column:8},end:{line:56,column:9}}],line:48},"4":{loc:{start:{line:50,column:16},end:{line:50,column:35}},type:"if",locations:[{start:{line:50,column:16},end:{line:50,column:35}},{start:{line:50,column:16},end:{line:50,column:35}}],line:50},"5":{loc:{start:{line:69,column:8},end:{line:74,column:9}},type:"if",locations:[{start:{line:69,column:8},end:{line:74,column:9}},{start:{line:69,column:8},end:{line:74,column:9}}],line:69},"6":{loc:{start:{line:80,column:20},end:{line:80,column:39}},type:"if",locations:[{start:{line:80,column:20},end:{line:80,column:39}},{start:{line:80,column:20},end:{line:80,column:39}}],line:80},"7":{loc:{start:{line:82,column:20},end:{line:111,column:21}},type:"if",locations:[{start:{line:82,column:20},end:{line:111,column:21}},{start:{line:82,column:20},end:{line:111,column:21}}],line:82},"8":{loc:{start:{line:88,column:24},end:{line:106,column:25}},type:"if",locations:[{start:{line:88,column:24},end:{line:106,column:25}},{start:{line:88,column:24},end:{line:106,column:25}}],line:88},"9":{loc:{start:{line:116,column:8},end:{line:119,column:9}},type:"if",locations:[{start:{line:116,column:8},end:{line:119,column:9}},{start:{line:116,column:8},end:{line:119,column:9}}],line:116},"10":{loc:{start:{line:128,column:8},end:{line:133,column:9}},type:"if",locations:[{start:{line:128,column:8},end:{line:133,column:9}},{start:{line:128,column:8},end:{line:133,column:9}}],line:128},"11":{loc:{start:{line:139,column:20},end:{line:139,column:39}},type:"if",locations:[{start:{line:139,column:20},end:{line:139,column:39}},{start:{line:139,column:20},end:{line:139,column:39}}],line:139},"12":{loc:{start:{line:152,column:8},end:{line:152,column:27}},type:"if",locations:[{start:{line:152,column:8},end:{line:152,column:27}},{start:{line:152,column:8},end:{line:152,column:27}}],line:152},"13":{loc:{start:{line:154,column:12},end:{line:154,column:31}},type:"if",locations:[{start:{line:154,column:12},end:{line:154,column:31}},{start:{line:154,column:12},end:{line:154,column:31}}],line:154},"14":{loc:{start:{line:165,column:8},end:{line:167,column:9}},type:"if",locations:[{start:{line:165,column:8},end:{line:167,column:9}},{start:{line:165,column:8},end:{line:167,column:9}}],line:165},"15":{loc:{start:{line:181,column:8},end:{line:186,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:186,column:9}},{start:{line:181,column:8},end:{line:186,column:9}}],line:181},"16":{loc:{start:{line:192,column:20},end:{line:192,column:39}},type:"if",locations:[{start:{line:192,column:20},end:{line:192,column:39}},{start:{line:192,column:20},end:{line:192,column:39}}],line:192},"17":{loc:{start:{line:197,column:20},end:{line:202,column:21}},type:"if",locations:[{start:{line:197,column:20},end:{line:202,column:21}},{start:{line:197,column:20},end:{line:202,column:21}}],line:197}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4159e727176da5e14a8503a05d8f52856c43d146"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2cautwdutz=function(){return actualCoverage;};}return actualCoverage;}cov_2cautwdutz();const config=(cov_2cautwdutz().s[0]++,require("../auth/auth.config"));const mysql=(cov_2cautwdutz().s[1]++,require('mysql'));var jwt=(cov_2cautwdutz().s[2]++,require("jsonwebtoken"));var bcrypt=(cov_2cautwdutz().s[3]++,require("bcryptjs"));let pool=(cov_2cautwdutz().s[4]++,mysql.createPool({connectionLimit:10,host:'99.77.89.225',user:'root',password:'',database:'fuel'}));cov_2cautwdutz().s[5]++;exports.signup=(req,res)=>{cov_2cautwdutz().f[0]++;let valid=(cov_2cautwdutz().s[6]++,true);//used in duplicate email check
let encryptedPass=(cov_2cautwdutz().s[7]++,bcrypt.hashSync(req.body.password,8));let query=(cov_2cautwdutz().s[8]++,"SELECT username FROM profile WHERE username = '"+req.body.username+"'");let insert=(cov_2cautwdutz().s[9]++,"INSERT INTO profile (username, password, newUser) VALUES ('"+req.body.username+"', '"+encryptedPass+"', 1);");//must add async keyword to be able to use await
cov_2cautwdutz().s[10]++;pool.getConnection(async function(err,connection){cov_2cautwdutz().f[1]++;cov_2cautwdutz().s[11]++;if(err){cov_2cautwdutz().b[0][0]++;cov_2cautwdutz().s[12]++;return console.error('error:'+err.message);}else{cov_2cautwdutz().b[0][1]++;}cov_2cautwdutz().s[13]++;console.log('Signup function called');//must use await and promise to make the program wait for query to finish
cov_2cautwdutz().s[14]++;valid=await new Promise(function(resolve,reject){cov_2cautwdutz().f[2]++;cov_2cautwdutz().s[15]++;setTimeout(function(){cov_2cautwdutz().f[3]++;cov_2cautwdutz().s[16]++;connection.query(query,function(err,result,fields){cov_2cautwdutz().f[4]++;cov_2cautwdutz().s[17]++;if(err){cov_2cautwdutz().b[1][0]++;cov_2cautwdutz().s[18]++;throw err;}else{cov_2cautwdutz().b[1][1]++;}cov_2cautwdutz().s[19]++;if(result.length!=0){cov_2cautwdutz().b[2][0]++;cov_2cautwdutz().s[20]++;//if result has something in it (ie the username is in the DB) then deny signup              
console.log("Duplicate username, denying signup");cov_2cautwdutz().s[21]++;res.status(400).send({message:"Username already in use!"});cov_2cautwdutz().s[22]++;resolve(false);//sets valid to false, username is already in DB
}else{cov_2cautwdutz().b[2][1]++;cov_2cautwdutz().s[23]++;resolve(true);//sets valid to true, username is not in DB
}});},2000);});//dont have to use a promise here since nothing depends on this query
cov_2cautwdutz().s[24]++;if(valid){cov_2cautwdutz().b[3][0]++;cov_2cautwdutz().s[25]++;connection.query(insert,function(err,result,fields){cov_2cautwdutz().f[5]++;cov_2cautwdutz().s[26]++;if(err){cov_2cautwdutz().b[4][0]++;cov_2cautwdutz().s[27]++;throw err;}else{cov_2cautwdutz().b[4][1]++;}cov_2cautwdutz().s[28]++;console.log("No duplicate username, signup success");cov_2cautwdutz().s[29]++;res.status(200).send({message:"Signup Successfully"});});}else{cov_2cautwdutz().b[3][1]++;}cov_2cautwdutz().s[30]++;connection.release();});};//this gets called when you loggin 
cov_2cautwdutz().s[31]++;exports.signin=(req,res)=>{cov_2cautwdutz().f[6]++;let valid=(cov_2cautwdutz().s[32]++,true);let query=(cov_2cautwdutz().s[33]++,"SELECT username, password, newUser FROM profile WHERE username = '"+req.body.username+"'");cov_2cautwdutz().s[34]++;console.log('Login function called');cov_2cautwdutz().s[35]++;pool.getConnection(async function(err,connection){cov_2cautwdutz().f[7]++;cov_2cautwdutz().s[36]++;if(err){cov_2cautwdutz().b[5][0]++;cov_2cautwdutz().s[37]++;res.status(401).send({message:"Failed to connect to database"});cov_2cautwdutz().s[38]++;return console.error('error:'+err.message);}else{cov_2cautwdutz().b[5][1]++;}//must use await and promise to make the program wait for query to finish
cov_2cautwdutz().s[39]++;valid=await new Promise(function(resolve,reject){cov_2cautwdutz().f[8]++;cov_2cautwdutz().s[40]++;setTimeout(function(){cov_2cautwdutz().f[9]++;cov_2cautwdutz().s[41]++;connection.query(query,function(err,result,fields){cov_2cautwdutz().f[10]++;cov_2cautwdutz().s[42]++;if(err){cov_2cautwdutz().b[6][0]++;cov_2cautwdutz().s[43]++;throw err;}else{cov_2cautwdutz().b[6][1]++;}cov_2cautwdutz().s[44]++;if(result.length!=0){cov_2cautwdutz().b[7][0]++;//if the username is in the DB
var passwordIsValid=(cov_2cautwdutz().s[45]++,bcrypt.compareSync(req.body.password,result[0].password//here we can use result[0] since the query should only return one row
));cov_2cautwdutz().s[46]++;if(!passwordIsValid){cov_2cautwdutz().b[8][0]++;cov_2cautwdutz().s[47]++;console.log("Invalid Password!");cov_2cautwdutz().s[48]++;res.status(401).send({accessToken:null,message:"Invalid Password!"});}else{cov_2cautwdutz().b[8][1]++;cov_2cautwdutz().s[49]++;console.log("Password was valid, login allowed");var token=(cov_2cautwdutz().s[50]++,jwt.sign({id:req.body.username},config.secret,{expiresIn:86400// 24 hours
}));cov_2cautwdutz().s[51]++;res.status(200).send({username:req.body.username,newUser:result[0].newUser,accessToken:token});}cov_2cautwdutz().s[52]++;resolve(true);}else{cov_2cautwdutz().b[7][1]++;cov_2cautwdutz().s[53]++;resolve(false);}});},2000);});cov_2cautwdutz().s[54]++;if(!valid){cov_2cautwdutz().b[9][0]++;cov_2cautwdutz().s[55]++;//username not in database
console.log("Username not found. Denying login.");cov_2cautwdutz().s[56]++;res.status(404).send({message:"User not found"});}else{cov_2cautwdutz().b[9][1]++;}cov_2cautwdutz().s[57]++;connection.release();});};cov_2cautwdutz().s[58]++;exports.fuelInfo=(req,res)=>{cov_2cautwdutz().f[11]++;let valid=(cov_2cautwdutz().s[59]++,true);let query=(cov_2cautwdutz().s[60]++,"SELECT * FROM profile WHERE username = '"+req.body.username+"'");cov_2cautwdutz().s[61]++;pool.getConnection(async function(err,connection){cov_2cautwdutz().f[12]++;cov_2cautwdutz().s[62]++;if(err){cov_2cautwdutz().b[10][0]++;cov_2cautwdutz().s[63]++;res.status(401).send({message:"Failed to connect to database"});cov_2cautwdutz().s[64]++;return console.error('error:'+err.message);}else{cov_2cautwdutz().b[10][1]++;}//must use await and promise to make the program wait for query to finish
cov_2cautwdutz().s[65]++;valid=await new Promise(function(resolve,reject){cov_2cautwdutz().f[13]++;cov_2cautwdutz().s[66]++;setTimeout(function(){cov_2cautwdutz().f[14]++;cov_2cautwdutz().s[67]++;connection.query(query,function(err,result,fields){cov_2cautwdutz().f[15]++;cov_2cautwdutz().s[68]++;if(err){cov_2cautwdutz().b[11][0]++;cov_2cautwdutz().s[69]++;throw err;}else{cov_2cautwdutz().b[11][1]++;}cov_2cautwdutz().s[70]++;res.status(200).send({address:result[0].addressOne});});},2000);});cov_2cautwdutz().s[71]++;connection.release();});};cov_2cautwdutz().s[72]++;exports.fuelquote=(req,res)=>{cov_2cautwdutz().f[16]++;var values=(cov_2cautwdutz().s[73]++,"INSERT INTO fuel (`gallons`, `date`, `suggested`, `total`, `username`) VALUES('"+req.body.gallons+"', '"+req.body.date+"', '"+req.body.suggestedPrice+"', '"+req.body.total+"', '"+req.body.username+"')");cov_2cautwdutz().s[74]++;pool.getConnection(function(err,connection){cov_2cautwdutz().f[17]++;cov_2cautwdutz().s[75]++;if(err){cov_2cautwdutz().b[12][0]++;cov_2cautwdutz().s[76]++;throw err;}else{cov_2cautwdutz().b[12][1]++;}cov_2cautwdutz().s[77]++;connection.query(values,function(err,result,fields){cov_2cautwdutz().f[18]++;cov_2cautwdutz().s[78]++;if(err){cov_2cautwdutz().b[13][0]++;cov_2cautwdutz().s[79]++;throw err;}else{cov_2cautwdutz().b[13][1]++;}cov_2cautwdutz().s[80]++;console.log("Query was made");});});cov_2cautwdutz().s[81]++;connection.release();};//find out how to request the address
cov_2cautwdutz().s[82]++;exports.profileform=(req,res)=>{cov_2cautwdutz().f[19]++;cov_2cautwdutz().s[83]++;pool.getConnection(async function(err,connection){cov_2cautwdutz().f[20]++;cov_2cautwdutz().s[84]++;if(err){cov_2cautwdutz().b[14][0]++;cov_2cautwdutz().s[85]++;return console.error('error:'+err.message);}else{cov_2cautwdutz().b[14][1]++;}cov_2cautwdutz().s[86]++;console.log('Profile Form function called');let update=(cov_2cautwdutz().s[87]++,"UPDATE profile SET name = '"+req.body.Fullname+"', addressOne = '"+req.body.AddressOne+"', addressTwo = '"+req.body.AddressTwo+"', city = '"+req.body.City+"', state = '"+req.body.State+"', zip =  '"+req.body.ZipCode+"', newUser = 0 WHERE username = '"+req.body.username+"'");cov_2cautwdutz().s[88]++;connection.query(update);cov_2cautwdutz().s[89]++;connection.release();});};cov_2cautwdutz().s[90]++;exports.getHistory=(req,res)=>{cov_2cautwdutz().f[21]++;cov_2cautwdutz().s[91]++;console.log("Get history function was called");let query=(cov_2cautwdutz().s[92]++,"SELECT * FROM fuel WHERE username = '"+req.body.username+"'");cov_2cautwdutz().s[93]++;pool.getConnection(async function(err,connection){cov_2cautwdutz().f[22]++;cov_2cautwdutz().s[94]++;if(err){cov_2cautwdutz().b[15][0]++;cov_2cautwdutz().s[95]++;res.status(401).send({message:"Failed to connect to database"});cov_2cautwdutz().s[96]++;return console.error('error:'+err.message);}else{cov_2cautwdutz().b[15][1]++;}//must use await and promise to make the program wait for query to finish
cov_2cautwdutz().s[97]++;valid=await new Promise(function(resolve,reject){cov_2cautwdutz().f[23]++;cov_2cautwdutz().s[98]++;setTimeout(function(){cov_2cautwdutz().f[24]++;cov_2cautwdutz().s[99]++;connection.query(query,function(err,result,fields){cov_2cautwdutz().f[25]++;cov_2cautwdutz().s[100]++;if(err){cov_2cautwdutz().b[16][0]++;cov_2cautwdutz().s[101]++;throw err;}else{cov_2cautwdutz().b[16][1]++;}cov_2cautwdutz().s[102]++;res.status(200).send({data:result});cov_2cautwdutz().s[103]++;console.log("History was sent");cov_2cautwdutz().s[104]++;if(true){cov_2cautwdutz().b[17][0]++;cov_2cautwdutz().s[105]++;resolve(true);}else{cov_2cautwdutz().b[17][1]++;cov_2cautwdutz().s[106]++;resolve(false);}});},2000);});cov_2cautwdutz().s[107]++;connection.release();});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJjb25maWciLCJyZXF1aXJlIiwibXlzcWwiLCJqd3QiLCJiY3J5cHQiLCJwb29sIiwiY3JlYXRlUG9vbCIsImNvbm5lY3Rpb25MaW1pdCIsImhvc3QiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImV4cG9ydHMiLCJzaWdudXAiLCJyZXEiLCJyZXMiLCJ2YWxpZCIsImVuY3J5cHRlZFBhc3MiLCJoYXNoU3luYyIsImJvZHkiLCJxdWVyeSIsInVzZXJuYW1lIiwiaW5zZXJ0IiwiZ2V0Q29ubmVjdGlvbiIsImVyciIsImNvbm5lY3Rpb24iLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwibG9nIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwicmVzdWx0IiwiZmllbGRzIiwibGVuZ3RoIiwic3RhdHVzIiwic2VuZCIsInJlbGVhc2UiLCJzaWduaW4iLCJwYXNzd29yZElzVmFsaWQiLCJjb21wYXJlU3luYyIsImFjY2Vzc1Rva2VuIiwidG9rZW4iLCJzaWduIiwiaWQiLCJzZWNyZXQiLCJleHBpcmVzSW4iLCJuZXdVc2VyIiwiZnVlbEluZm8iLCJhZGRyZXNzIiwiYWRkcmVzc09uZSIsImZ1ZWxxdW90ZSIsInZhbHVlcyIsImdhbGxvbnMiLCJkYXRlIiwic3VnZ2VzdGVkUHJpY2UiLCJ0b3RhbCIsInByb2ZpbGVmb3JtIiwidXBkYXRlIiwiRnVsbG5hbWUiLCJBZGRyZXNzT25lIiwiQWRkcmVzc1R3byIsIkNpdHkiLCJTdGF0ZSIsIlppcENvZGUiLCJnZXRIaXN0b3J5IiwiZGF0YSJdLCJtYXBwaW5ncyI6InVuZUFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSywwQkFBR0QsT0FBTyxDQUFDLE9BQUQsQ0FBVixDQUFYLENBRUEsR0FBSUUsQ0FBQUEsR0FBRywwQkFB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QUFvQkMsVUFBcEIsQ0FBZ0MsbURBQ2hELEdBQUdELEdBQUgsQ0FBTyxzREFDSFQsR0FBRyxDQUFDc0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ2pCVixPQUFPLENBQUUsK0JBRFEsQ0FBckIsRUFERyx5QkFJSCxNQUFPRixDQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBYyxTQUFXSCxHQUFHLENBQUNJLE9BQTdCLENBQVAsQ0FDSCxDQUxELGtDQU9BO0FBUmdELHlCQVNoRFosS0FBSyxDQUFHLEtBQU0sSUFBSWMsQ0FBQUEsT0FBSixDQUFZLFNBQVNDLE9BQVQsQ0FBa0JDLE1BQWxCLENBQTBCLG1EQUNoREMsVUFBVSxDQUFDLFVBQVcsbURBQ2xCUixVQUFVLENBQUNMLEtBQVgsQ0FBaUJBLEtBQWpCLENBQXdCLFNBQVNJLEdBQVQsQ0FBY1UsTUFBZCxDQUFzQkMsTUFBdEIsQ0FBNkIsb0RBQ2pELEdBQUlYLEdBQUosQ0FBUyw0REFBTUEsQ0FBQUEsR0FBTixDQUFVLENBQW5CLGtDQURpRCwwQkFFakRULEdBQUcsQ0FBQ3NCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUNqQjhCLElBQUksQ0FBRWxDLE1BRFcsQ0FBckIsRUFGaUQsMEJBS2pEUixPQUFPLENBQUNHLEdBQVIsQ0FBWSxrQkFBWixFQUxpRCwwQkFNakQsR0FBRyxJQUFILENBQVEsdURBQ0pFLE9BQU8sQ0FBQyxJQUFELENBQVAsQ0FDSCxDQUZELElBR0ksdURBQ0FBLE9BQU8sQ0FBQyxLQUFELENBQVAsQ0FDSCxDQUNKLENBWkQsRUFhQyxDQWRLLENBY0gsSUFkRyxDQUFWLENBZUgsQ0FoQmEsQ0FBZCxDQVRnRCwwQkEwQmhETixVQUFVLENBQUNjLE9BQVgsR0FDSCxDQTNCRCxFQTRCSCxDQWpDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoXCIuLi9hdXRoL2F1dGguY29uZmlnXCIpXHJcbmNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwnKVxyXG5cclxudmFyIGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIilcclxudmFyIGJjcnlwdCA9IHJlcXVpcmUoXCJiY3J5cHRqc1wiKVxyXG5cclxubGV0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcclxuICAgICAgICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gICAgICAgIGhvc3Q6ICc5OS43Ny44OS4yMjUnLFxyXG4gICAgICAgIHVzZXI6ICdyb290JyxcclxuICAgICAgICBwYXNzd29yZDogJycsXHJcbiAgICAgICAgZGF0YWJhc2U6ICdmdWVsJ1xyXG59KVxyXG5cclxuXHJcbmV4cG9ydHMuc2lnbnVwID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBsZXQgdmFsaWQgPSB0cnVlICAgLy91c2VkIGluIGR1cGxpY2F0ZSBlbWFpbCBjaGVja1xyXG4gICAgbGV0IGVuY3J5cHRlZFBhc3MgPSBiY3J5cHQuaGFzaFN5bmMocmVxLmJvZHkucGFzc3dvcmQsOClcclxuICAgIGxldCBxdWVyeSA9IFwiU0VMRUNUIHVzZXJuYW1lIEZST00gcHJvZmlsZSBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHJlcS5ib2R5LnVzZXJuYW1lICsgXCInXCJcclxuICAgIGxldCBpbnNlcnQgPSBcIklOU0VSVCBJTlRPIHByb2ZpbGUgKHVzZXJuYW1lLCBwYXNzd29yZCwgbmV3VXNlcikgVkFMVUVTICgnXCIgKyByZXEuYm9keS51c2VybmFtZSArIFwiJywgJ1wiKyBlbmNyeXB0ZWRQYXNzICsgXCInLCAxKTtcIlxyXG5cclxuICAgIC8vbXVzdCBhZGQgYXN5bmMga2V5d29yZCB0byBiZSBhYmxlIHRvIHVzZSBhd2FpdFxyXG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCBhc3luYyBmdW5jdGlvbihlcnIsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignZXJyb3I6JyArIGVyci5tZXNzYWdlKVxyXG4gICAgICAgIH0gICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NpZ251cCBmdW5jdGlvbiBjYWxsZWQnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vbXVzdCB1c2UgYXdhaXQgYW5kIHByb21pc2UgdG8gbWFrZSB0aGUgcHJvZ3JhbSB3YWl0IGZvciBxdWVyeSB0byBmaW5pc2hcclxuICAgICAgICB2YWxpZCA9IGF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQsIGZpZWxkcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5sZW5ndGggIT0gMCl7ICAvL2lmIHJlc3VsdCBoYXMgc29tZXRoaW5nIGluIGl0IChpZSB0aGUgdXNlcm5hbWUgaXMgaW4gdGhlIERCKSB0aGVuIGRlbnkgc2lnbnVwICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEdXBsaWNhdGUgdXNlcm5hbWUsIGRlbnlpbmcgc2lnbnVwXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVXNlcm5hbWUgYWxyZWFkeSBpbiB1c2UhXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSkgIC8vc2V0cyB2YWxpZCB0byBmYWxzZSwgdXNlcm5hbWUgaXMgYWxyZWFkeSBpbiBEQlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpICAgLy9zZXRzIHZhbGlkIHRvIHRydWUsIHVzZXJuYW1lIGlzIG5vdCBpbiBEQlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vZG9udCBoYXZlIHRvIHVzZSBhIHByb21pc2UgaGVyZSBzaW5jZSBub3RoaW5nIGRlcGVuZHMgb24gdGhpcyBxdWVyeVxyXG4gICAgICAgIGlmKHZhbGlkKXtcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShpbnNlcnQsIGZ1bmN0aW9uKGVyciwgcmVzdWx0LCBmaWVsZHMpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBkdXBsaWNhdGUgdXNlcm5hbWUsIHNpZ251cCBzdWNjZXNzXCIpXHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTaWdudXAgU3VjY2Vzc2Z1bGx5XCJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xyXG4gICAgfSlcclxufVxyXG5cclxuLy90aGlzIGdldHMgY2FsbGVkIHdoZW4geW91IGxvZ2dpbiBcclxuZXhwb3J0cy5zaWduaW4gPSAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB2YWxpZCA9IHRydWU7XHJcbiAgICBsZXQgcXVlcnkgPSBcIlNFTEVDVCB1c2VybmFtZSwgcGFzc3dvcmQsIG5ld1VzZXIgRlJPTSBwcm9maWxlIFdIRVJFIHVzZXJuYW1lID0gJ1wiICsgcmVxLmJvZHkudXNlcm5hbWUgKyBcIidcIlxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnTG9naW4gZnVuY3Rpb24gY2FsbGVkJylcclxuICAgIFxyXG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCBhc3luYyBmdW5jdGlvbihlcnIsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjb25uZWN0IHRvIGRhdGFiYXNlXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ2Vycm9yOicgKyBlcnIubWVzc2FnZSlcclxuICAgICAgICB9ICAgIFxyXG5cclxuICAgICAgICAvL211c3QgdXNlIGF3YWl0IGFuZCBwcm9taXNlIHRvIG1ha2UgdGhlIHByb2dyYW0gd2FpdCBmb3IgcXVlcnkgdG8gZmluaXNoXHJcbiAgICAgICAgdmFsaWQgPSBhd2FpdCBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkocXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0LCBmaWVsZHMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Lmxlbmd0aCAhPSAwKXsgIC8vaWYgdGhlIHVzZXJuYW1lIGlzIGluIHRoZSBEQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFzc3dvcmRJc1ZhbGlkID0gYmNyeXB0LmNvbXBhcmVTeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbMF0ucGFzc3dvcmQgIC8vaGVyZSB3ZSBjYW4gdXNlIHJlc3VsdFswXSBzaW5jZSB0aGUgcXVlcnkgc2hvdWxkIG9ubHkgcmV0dXJuIG9uZSByb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwYXNzd29yZElzVmFsaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCBQYXNzd29yZCFcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgUGFzc3dvcmQhXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc3dvcmQgd2FzIHZhbGlkLCBsb2dpbiBhbGxvd2VkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiByZXEuYm9keS51c2VybmFtZSB9LCBjb25maWcuc2VjcmV0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMCAvLyAyNCBob3Vyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogcmVxLmJvZHkudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VXNlcjogcmVzdWx0WzBdLm5ld1VzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYoIXZhbGlkKXsgICAgIC8vdXNlcm5hbWUgbm90IGluIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcm5hbWUgbm90IGZvdW5kLiBEZW55aW5nIGxvZ2luLlwiKVxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7bWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwifSlcclxuICAgICAgICB9XHJcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgICB9KVxyXG59XHJcbmV4cG9ydHMuZnVlbEluZm8gPSAocmVxLCByZXMpID0+IHtcclxuICAgIGxldCB2YWxpZCA9IHRydWU7XHJcbiAgICBsZXQgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gcHJvZmlsZSBXSEVSRSB1c2VybmFtZSA9ICdcIiArIHJlcS5ib2R5LnVzZXJuYW1lICsgXCInXCJcclxuXHJcbiAgICBwb29sLmdldENvbm5lY3Rpb24oYXN5bmMgZnVuY3Rpb24gKGVyciwgY29ubmVjdGlvbikge1xyXG4gICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gY29ubmVjdCB0byBkYXRhYmFzZVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKCdlcnJvcjonICsgZXJyLm1lc3NhZ2UpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL211c3QgdXNlIGF3YWl0IGFuZCBwcm9taXNlIHRvIG1ha2UgdGhlIHByb2dyYW0gd2FpdCBmb3IgcXVlcnkgdG8gZmluaXNoXHJcbiAgICAgICAgdmFsaWQgPSBhd2FpdCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShxdWVyeSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0LCBmaWVsZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiByZXN1bHRbMF0uYWRkcmVzc09uZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xyXG4gICAgfSlcclxufVxyXG5leHBvcnRzLmZ1ZWxxdW90ZSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgdmFyIHZhbHVlcyA9IFwiSU5TRVJUIElOVE8gZnVlbCAoYGdhbGxvbnNgLCBgZGF0ZWAsIGBzdWdnZXN0ZWRgLCBgdG90YWxgLCBgdXNlcm5hbWVgKSBWQUxVRVMoJ1wiICsgcmVxLmJvZHkuZ2FsbG9ucyArIFwiJywgJ1wiICsgcmVxLmJvZHkuZGF0ZSArIFwiJywgJ1wiICsgcmVxLmJvZHkuc3VnZ2VzdGVkUHJpY2UgKyBcIicsICdcIiArIHJlcS5ib2R5LnRvdGFsICsgXCInLCAnXCIgKyByZXEuYm9keS51c2VybmFtZSArIFwiJylcIlxyXG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKGZ1bmN0aW9uIChlcnIsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XHJcbiAgICAgICAgY29ubmVjdGlvbi5xdWVyeSh2YWx1ZXMsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCwgZmllbGRzKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJRdWVyeSB3YXMgbWFkZVwiKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxufVxyXG5cclxuLy9maW5kIG91dCBob3cgdG8gcmVxdWVzdCB0aGUgYWRkcmVzc1xyXG5leHBvcnRzLnByb2ZpbGVmb3JtID0gKHJlcSwgcmVzKSA9PiB7XHJcblxyXG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCBhc3luYyBmdW5jdGlvbihlcnIsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcignZXJyb3I6JyArIGVyci5tZXNzYWdlKVxyXG4gICAgICAgIH0gICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2ZpbGUgRm9ybSBmdW5jdGlvbiBjYWxsZWQnKVxyXG4gICAgICAgIGxldCB1cGRhdGUgPSBcIlVQREFURSBwcm9maWxlIFNFVCBuYW1lID0gJ1wiKyByZXEuYm9keS5GdWxsbmFtZSArIFwiJywgYWRkcmVzc09uZSA9ICdcIiArIHJlcS5ib2R5LkFkZHJlc3NPbmUgKyBcIicsIGFkZHJlc3NUd28gPSAnXCIgKyByZXEuYm9keS5BZGRyZXNzVHdvICsgXCInLCBjaXR5ID0gJ1wiICsgcmVxLmJvZHkuQ2l0eSArIFwiJywgc3RhdGUgPSAnXCIgKyByZXEuYm9keS5TdGF0ZSArIFwiJywgemlwID0gICdcIiArIHJlcS5ib2R5LlppcENvZGUgKyBcIicsIG5ld1VzZXIgPSAwIFdIRVJFIHVzZXJuYW1lID0gJ1wiICsgcmVxLmJvZHkudXNlcm5hbWUgKyBcIidcIjtcclxuICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHVwZGF0ZSk7XHJcbiAgICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnRzLmdldEhpc3RvcnkgPSAocmVxLCByZXMpID0+e1xyXG4gICAgY29uc29sZS5sb2coXCJHZXQgaGlzdG9yeSBmdW5jdGlvbiB3YXMgY2FsbGVkXCIpXHJcblxyXG4gICAgbGV0IHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIGZ1ZWwgV0hFUkUgdXNlcm5hbWUgPSAnXCIgKyByZXEuYm9keS51c2VybmFtZSArIFwiJ1wiXHJcblxyXG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCBhc3luYyBmdW5jdGlvbihlcnIsIGNvbm5lY3Rpb24pIHtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjb25uZWN0IHRvIGRhdGFiYXNlXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ2Vycm9yOicgKyBlcnIubWVzc2FnZSlcclxuICAgICAgICB9ICAgIFxyXG5cclxuICAgICAgICAvL211c3QgdXNlIGF3YWl0IGFuZCBwcm9taXNlIHRvIG1ha2UgdGhlIHByb2dyYW0gd2FpdCBmb3IgcXVlcnkgdG8gZmluaXNoXHJcbiAgICAgICAgdmFsaWQgPSBhd2FpdCBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkocXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0LCBmaWVsZHMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIaXN0b3J5IHdhcyBzZW50XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICAgIH0pXHJcbn1cclxuIl19